<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Work Tracker Pro</title>
<style>
  /* Dark mode iOS Calculator vibes */
  body { 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
    background-color: #000000; 
    color: #ffffff; 
    margin: 0; 
    padding: 15px; 
    display: flex; 
    flex-direction: column; 
    height: 100vh; 
    box-sizing: border-box;
    overscroll-behavior: none; /* Stops pull-to-refresh on iPhone */
  }
  
  /* Variable Cards */
  .cards-container { display: flex; gap: 15px; margin-bottom: 20px; }
  .card { 
    flex: 1; 
    background-color: #1c1c1e; 
    padding: 15px 10px; 
    border-radius: 20px; 
    border: 2px solid transparent;
    transition: all 0.2s;
    text-align: center;
  }
  .card.active { 
    border-color: #0a84ff; 
    background-color: #2c2c2e; 
  }
  
  /* Editable Titles & Values */
  .var-title { 
    width: 100%; 
    background: transparent; 
    border: none; 
    color: #8e8e93; 
    font-size: 16px; 
    text-align: center; 
    text-transform: uppercase; 
    font-weight: bold;
    margin-bottom: 10px;
  }
  .var-title:focus { outline: none; color: #ffffff; }
  
  .var-val { 
    width: 100%; 
    background: transparent; 
    border: none; 
    color: #ffffff; 
    font-size: 36px; 
    font-weight: bold; 
    text-align: center; 
  }
  .var-val:focus { outline: none; }

  /* Numpad Display */
  .calc-display {
    font-size: 48px;
    text-align: right;
    padding: 10px 20px;
    margin-bottom: 20px;
    color: #f2f2f7;
    min-height: 55px;
  }

  /* Numpad Grid */
  .numpad { 
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    gap: 12px; 
    margin-bottom: 12px;
    margin-top: auto; /* Pushes numpad to bottom */
  }
  .numpad button { 
    background-color: #333333; 
    color: #ffffff; 
    font-size: 32px; 
    border: none; 
    border-radius: 50px; 
    padding: 18px 0; 
    cursor: pointer;
    touch-action: manipulation;
  }
  .numpad button:active { background-color: #737373; }
  .numpad button.action-btn { background-color: #a5a5a5; color: #000; }
  .numpad button.action-btn:active { background-color: #d4d4d4; }

  /* Plus/Minus Row */
  .operators { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .operators button {
    font-size: 40px;
    border: none;
    border-radius: 20px;
    padding: 15px 0;
    color: white;
    touch-action: manipulation;
  }
  .btn-minus { background-color: #ff453a; }
  .btn-plus { background-color: #30d158; }
  .operators button:active { opacity: 0.6; }

</style>
</head>
<body>

<div class="cards-container">
  <div class="card active" id="card1" onclick="setActive(1)">
    <input type="text" id="title1" class="var-title" value="Variable 1">
    <input type="number" id="val1" class="var-val" value="0" step="any">
  </div>
  
  <div class="card" id="card2" onclick="setActive(2)">
    <input type="text" id="title2" class="var-title" value="Variable 2">
    <input type="number" id="val2" class="var-val" value="0" step="any">
  </div>
</div>

<div class="calc-display" id="display"></div>

<div class="numpad">
  <button onclick="append('7')">7</button>
  <button onclick="append('8')">8</button>
  <button onclick="append('9')">9</button>
  <button onclick="append('4')">4</button>
  <button onclick="append('5')">5</button>
  <button onclick="append('6')">6</button>
  <button onclick="append('1')">1</button>
  <button onclick="append('2')">2</button>
  <button onclick="append('3')">3</button>
  <button onclick="clearCalc()" class="action-btn">C</button>
  <button onclick="append('0')">0</button>
  <button onclick="append('.')">.</button>
</div>

<div class="operators">
  <button class="btn-minus" onclick="applyMath(-1)">âˆ’</button>
  <button class="btn-plus" onclick="applyMath(1)">+</button>
</div>

<script>
  let activeVar = 1;
  let currentEntry = '';

  // 1. Load saved data on startup
  window.onload = function() {
    ['val1', 'val2', 'title1', 'title2'].forEach(id => {
      if(localStorage.getItem(id)) document.getElementById(id).value = localStorage.getItem(id);
    });
  };

  // 2. Save manual edits immediately
  ['val1', 'val2', 'title1', 'title2'].forEach(id => {
    document.getElementById(id).addEventListener('input', (e) => localStorage.setItem(id, e.target.value));
  });

  // 3. Highlight the active box
  function setActive(num) {
    activeVar = num;
    document.getElementById('card1').classList.remove('active');
    document.getElementById('card2').classList.remove('active');
    document.getElementById('card' + num).classList.add('active');
  }

  // 4. Numpad Logic
  function append(char) {
    // Prevent double decimals
    if (char === '.' && currentEntry.includes('.')) return; 
    currentEntry += char;
    updateDisplay();
  }

  function clearCalc() {
    currentEntry = '';
    updateDisplay();
  }

  function updateDisplay() {
    document.getElementById('display').innerText = currentEntry;
  }

  // 5. Apply the math to the active box
  function applyMath(multiplier) {
    if (!currentEntry) return; // Do nothing if pad is empty
    
    let targetId = 'val' + activeVar;
    let currentBoxVal = parseFloat(document.getElementById(targetId).value) || 0;
    let adjustmentVal = parseFloat(currentEntry) || 0;
    
    // Calculate and round to fix JS decimal bugs
    let newVal = currentBoxVal + (adjustmentVal * multiplier);
    newVal = Math.round(newVal * 1000) / 1000;
    
    // Update screen & save
    document.getElementById(targetId).value = newVal;
    localStorage.setItem(targetId, newVal);
    
    // Clear numpad
    clearCalc();
  }
</script>
</body>
</html>
